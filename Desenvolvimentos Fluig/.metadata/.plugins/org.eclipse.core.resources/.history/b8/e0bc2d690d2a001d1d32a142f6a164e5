<html>

<head>
   <link type="text/css" rel="stylesheet" href="AMU.css" />
   <link type="text/css" rel="stylesheet" href="style.css" />
   <link type="text/css" rel="stylesheet" href="/style-guide/css/fluig-style-guide.min.css" />

   <script type="text/javascript" src="/portal/resources/js/jquery/jquery.js"></script>
   <script type="text/javascript" src="/portal/resources/js/jquery/jquery-ui.min.js"></script>
   <script type="text/javascript" src="/portal/resources/js/mustache/mustache-min.js"></script>
   <script type="text/javascript" src="/style-guide/js/fluig-style-guide.min.js" charset="utf-8"></script>
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.16/dist/sweetalert2.all.min.js"></script>

   <script src="/webdesk/vcXMLRPC.js"></script>
   <script type="text/javascript" src="FLUIGIP.js"></script>
   <script type="text/javascript" src="compras.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>

</head>

<body>
   <div class="fluig-style-guide">
      <div class="fs-huge-margin-top fs-xl-margin-left fs-md-margin-right">
         <div class="row text-center" data-type="header" data-field-name="headerCompras">
            <div class="col-md-2">
               <img src="imagens/logo.png" style="width: auto; height: 100px">
            </div>
            <div class="col-md-8">
               <h2 class="text-center" id="tituloSolicitacao">Solicitação de Contração de Serviços</h2>
               <h2 class="text-center" id="tituloCadastroProtheus">Solicitação de Inclusão de Serviço no Protheus</h2>
               <h2 class="text-center" id="tituloApGerente">Aprovação de Solicitação</h2>
               <h2 class="text-center" id="tituloCotacao">Análise de Cotação </h2>
               <h2 class="text-center" id="tituloContratacaoServiço">Contratação Serviço</h2>
               <h2 class="text-center" id="tituloAssinaturaContrato">Assinatura Contrato</h2>
               <h2 class="text-center" id="tituloValidarContrato">Validação do Contrato</h2>
               <h2 class="text-center" id="tituloValidarServico">Validação de Serviço</h2>
               <h2 class="text-center" id="tituloSolicitacaoFinalizada">Solicitação Finalizada</h2>
            </div>
            <div class="col-md-2" id="logo-right">
               <img src="imagens/logo.png" style="width: auto; height: 100px">
            </div>
         </div>

         <form class="form-horizontal fs-sm-margin-top" name="form" role="form">
            <div class="panel panel-success" id="panelDadoSolicitante" name="panelDadoSolicitante" style="background-image: url('http://portal.medmais.com:8007/portal/api/servlet/image/0101001/custom/abstrato-branco-3d.jpg');">
               <div class="panel-heading">
                  <p class="panel-title">
                     <i class="flaticon flaticon-person icon-lg"></i>
                     <strong class="fs-xs-margin-left">Dados do Solicitante</strong>
                  </p>
               </div>
               <div class="panel-body">
                  <div class="row">
                     <div class="form-group col-md-2 ms-left">
                        <div class="input-group col-sm-12">
                           <label for="nameUser">Nome do Usuário<strong class="required text-danger"></strong></label>
                           <input type="text" class="form-control zoom-tdi" id="nameUser" name="nameUser"
                              style="width: 100%!important;" analytics="true" gooddataid="1" readonly>
                        </div>
                     </div>
                     <div class="form-group col-sm-4 ms-left">                        
                        <label for="empresa">Empresa/Filial<strong class="required text-danger"></strong></label>
                        <div class="input-group">
                            <span class="input-group-addon">
                                <i class="flaticon flaticon-company icon-sm" aria-hidden="true"></i></span>
                        <div class="input-group col-sm-12">
                           <input type="hidden" id="codFilial" name="codFilial" data-fluig-state-valid="0,4,119,491"
                              data-fluig-write="0,4,119,491">
                           <input type="hidden" id="codArmazem" name="codArmazem" data-fluig-state-valid="0,4,119,491"
                              data-fluig-write="0,4,119,491">
                           <input type="text" class="form-control zoom-tdi" id="empresa" name="empresa"
                              data-fluig-state-valid="0,4,119,491" data-fluig-write="0,4,119,491"
                              onchange="validaCampo(this)" required="required" readonly placeholder="Selecione a Empresa">
                           <div class="input-group-addon zoom-tdi" onclick="zoomEmpresa(this)" data-toggle="tooltip"
                              data-placement="bottom" title="Pesquisar empresa">
                              <i class="flaticon flaticon-search icon-sm"></i>
                           </div>
                        </div>
                        </div>
                     </div>
                     <div class="form-group col-sm-4 ms-left">                        
                        <label for="centroCusto">Centro de Custo<strong class="required text-danger"></strong></label>
                        <div class="input-group">
                            <span class="input-group-addon">
                                <i class="flaticon flaticon-company icon-sm" aria-hidden="true"></i></span>
                        <div class="input-group col-sm-12">
                           <input type="hidden" id="codCentroCusto" name="codCentroCusto"
                              data-fluig-state-valid="0,4,119,491" data-fluig-write="0,4,119,491">
                           <input type="text" class="form-control zoom-tdi" id="descricao" name="descricao"
                              data-fluig-state-valid="0,4,119,491" data-fluig-write="0,4,119,491"
                              onchange="validaCampo(this)" required="required" readonly placeholder="Selecione o Centro de Custo">
                           <div class="input-group-addon zoom-tdi" onclick="zoomCusto(this)" data-toggle="tooltip"
                              data-placement="bottom" title="Pesquisar centro de custo">
                              <i class="flaticon flaticon-search icon-sm"></i>
                           </div>
                        </div>
                     </div>
                     </div>
                     <div class="form-field" data-type="date" data-show-properties="" data-field-name="prazoEntrega">
                        <div class="col-md-2">
                            <label for="prazoEntrega" style="color:red;">Prazo de Entrega: </label>                                    
                            <input type="date" id="prazoEntrega" onkeypress="return false" name="prazoEntrega" min=""
                                class="form-control" data-fluig-state-valid="0,4" data-fluig-write="0,4" >
                        </div>
                    </div>
                  </div>                  
               </div>
            </div>

            <!-- formulário dados da solicitação-->
            <div class="panel panel-danger" id="panelDadoSolicitacao" name="panelDadoSolicitacao" style="background-image: url('http://portal.medmais.com:8007/portal/api/servlet/image/0101001/custom/abstrato-branco-3d.jpg');">
               <div class="panel-heading">
                  <p class="panel-title">
                     <i class="flaticon flaticon-content-paste icon-lg"></i>
                     <strong class="fs-xs-margin-left">Dados da Solicitação</strong>
                  </p>
               </div>
               <div class="panel-body">
                  <div class="form-group col-sm-12">
                     <div class="table-datatable">
                        <div class="form-group col-sm-12">
                           <div class="row fs-xs-margin-left">
                              <div class="col-sm-6 text-left">
                                 <h2 name="tituloProdutos" id="tituloProdutos">Serviços</h2>
                              </div>
                              <div class="col-sm-6 text-right" id="grupoBotaoProdutos">
                                 <button type="button" class="btn btn-success" name="modalAdicionarProduto"
                                    id="modalAdicionarProduto" data-toggle="tooltip" data-placement="bottom"
                                    title="Adicionar novo produto" style="display: none;">
                                    <i class="flaticon flaticon-add-box icon-sm"></i>
                                    Solicitar cadastro de serviço
                                 </button>
                                 <button type="button" class="btn btn-info" name="modalBuscarProduto"
                                    id="modalBuscarProduto" data-toggle="tooltip" data-placement="bottom"
                                    title="Buscar produto">
                                    <i class="flaticon flaticon-search icon-sm"></i>
                                    Buscar serviço
                                 </button>
                              </div>
                           </div>
                        </div>
                        <!-- tabela de produtos cadastrados no sistema e adicionados pelo usuário -->
                        <div class="row">
                           <div class="col-sm-12 table-responsive fs-md-margin-top">
                              <h3 id="labelProdutos">Novos Serviços - Cadastro Protheus</h3>
                              <table name="tb_novosProdutos" id="tb_novosProdutos"
                                 class="table table-bordered table-striped  ">
                                 <thead>
                                    <tr>
                                       <th>Descrição</th>
                                       <th>Observação</th>
                                       <th></th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                 </tbody>
                              </table>

                              <input type="hidden" id="listaNovosProdutos" name="listaNovosProdutos">
                           </div>
                        </div>
                        <!-- tabela de produtos cadastrados no sistema e adicionados pelo usuário -->
                        <div class="row">
                           <div class="col-sm-12 table-responsive fs-md-margin-top">
                              <h3 id="labelProdutosAdicionais">Serviços Adicionados</h3>
                              <table name="tb_produtos" id="tb_produtos" class="table table-bordered table-striped  ">
                                 <thead>
                                    <tr>
                                       <th>Código Produto</th>
                                       <th>Descrição</th>
                                       <th>Quantidade</th>
                                       <th>Valor do Orçamento</th>
                                       <th>Especificação Técnica</th>
                                       <th>Observação</th>
                                       <th></th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                 </tbody>
                              </table>
                              <input type="hidden" id="listaProdutos" name="listaProdutos">
                           </div>
                        </div>
                     </div>
                  </div>
                  <div name="produtoTab" id="produtoTab">
                     <div class="form-group col-sm-12">
                        <div class="input-group col-sm-12">
                           <label for="justificativa" class="col-sm-12">Justificativa</label>
                           <textarea class="form-control" rows="5" name="justificativa" id="justificativa"
                              data-fluig-state-valid="0,4" data-fluig-write="0,4"></textarea>
                        </div>
                     </div>
                  </div>
               </div>
            </div>

            <!-- Panel controle orcamentario -->
            <div class="row" data-type="content" data-field-name="contentOrcamento">
               <div class="panel panel-danger" id="panelOrcamento">
                  <div class="panel-heading">
                     <p class="panel-title">
                        <i class="flaticon flaticon-content-paste icon-lg"></i>
                        <strong class="fs-xs-margin-left">Controle Orçamentário</strong>
                     </p>
                  </div>
                  <div class="panel-body">
                     <!-- ORÇAMENTO FEITO PELO EMBAIXADOR -->
                     <div class="row col-md-12 fs-huge-margin-top" data-type="table" data-field-name="tableOrcamento">
                        <h2>Controle Orçamentário Preenchido pelo Requisitante </h2>
                        <div class="col-sm-12 table-responsive fs-md-margin-top">
                           <table name="tb_orcamento" id="tb_orcamento" class="table table-bordered table-striped  ">
                              <thead>
                                 <tr>
                                    <th>Descrição</th>
                                    <th>Quantidade</th>
                                    <th>Valor do Orçamento</th>
                                    <th>Especificação Técnica</th>
                                 </tr>
                              </thead>
                              <tbody>
                              </tbody>
                           </table>
                        </div>
                     </div>

                     <!-- APRESENTACAO VALOR TOTAL ORÇAMENTO -->
                     <div class="row ms-valores-cotacao">
                        <div class="form-group col-sm-4 ms-left">
                           <div class="input-group col-sm-12">
                           </div>
                        </div>
                        <div class="form-group col-sm-4 ms-left">
                           <div class="input-group col-sm-12">
                           </div>
                        </div>
                        <div class="form-group col-sm-4 ms-left">
                           <div class="input-group col-sm-12">
                              <h2>Orçamento Total</h2>
                              <span class="font-span" id="totalOrcamento"></span>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>


            <!-- formulário cotações -->
            <div class="panel panel-danger" id="panelCotacoes">
               <div class="panel-heading">
                  <p class="panel-title">
                     <i class="flaticon flaticon-content-paste icon-lg"></i>
                     <strong class="fs-xs-margin-left">Análise de Cotação</strong>
                  </p>
               </div>
               <div class="panel-body">
                  <div class="row col-sm-12 fs-huge-margin-top" data-type="table" data-field-name="tableCotacoes">                    
                        <div class="col-sm-12 table-responsive fs-md-margin-top">
                           <table name="tb_cotacoes" id="tb_cotacoes" class="table table-bordered table-striped  ">
                              <thead>
                                 <tr>
                                    <th>Descrição</th>
                                    <th>Quantidade</th>
                                    <th>Fornecedores</th>
                                    <th></th>
                                 </tr>
                              </thead>
                              <tbody>
                              </tbody>
                           </table>
                        </div>
                        <!-- Cotacoes a serem enviadas no taskScript130 -->
                        <input type="hidden" name="cotacoesInput" id="cotacoesInput">
                     </div>

                     <div class="row col-md-12 fs-huge-margin-top" id="erroCotacao">
                        <span> Existem cotações que não foram realizadas. Favor entrar em contato com o setor de
                           insumos.</span>
                     </div>

                     <div class="row ms-valores-cotacao">
                        <div class="form-group col-sm-3 ms-left">
                           <div class="input-group col-sm-12">
                              <h2 id="labelValorMercadoria">Valor da Mercadoria</h2>
                              <span class="font-span" id="valorMercadoria"></span>
                           </div>
                        </div>
                        <div class="form-group col-sm-3 ms-left">
                           <div class="input-group col-sm-12">
                              <h2 id="labelDespesasFrete">Despesas</h2>
                              <span class="font-span" id="valorDespesas"></span>
                           </div>
                        </div>
                        <div class="form-group col-sm-3 ms-left">
                           <div class="input-group col-sm-12">
                              <h2 id="labelDespesasFrete">Frete</h2>
                              <span class="font-span" id="valorFrete"></span>
                           </div>
                        </div>
                        <div class="form-group col-sm-3 ms-left">
                           <div class="input-group col-sm-12">
                              <h2 id="labelTotalDesconto">Descontos</h2>
                              <span class="font-span" id="valorDescontos"></span>
                           </div>
                        </div>

                     </div>

                     <div class="row ms-valores-cotacao">
                        <div class="form-group col-sm-4 ms-left">
                           <div class="input-group col-sm-12">
                           </div>
                        </div>
                        <div class="form-group col-sm-4 ms-left">
                           <div class="input-group col-sm-12">
                           </div>
                        </div>
                        <div class="form-group col-sm-4 ms-left">
                           <div class="input-group col-sm-12">
                              <h2>Total líquido da Cotação</h2>
                              <span class="font-span" id="valorTotalCompra"></span>
                           </div>
                        </div>
                     </div>

                     <!-- <div class="row col-md-12 fs-huge-margin-top"  style="text-align: right;">
                        <div class="form-group">               
                           <div class="input-group col-sm-12">                  
                              <h2 id="labelTotalCompra">Total do pedido de compra</h2>
                              <h3 id="valorTotalCompra"></h3>
                           </div>
                        </div>
                     </div> -->

                  </div>
               </div>
            </div>

            <!-- formulário em processso de contração -->
            

            <!-- formulario de validacao de servico -->
            <div class="panel panel-success" id="panelValidarServico">
               <div class="panel-heading">
                  <p class="panel-title">
                     <i class="flaticon  flaticon-document-check  icon-lg"></i>
                     <strong class="fs-xs-margin-left">Validação do Serviço</strong>
                  </p>
               </div>
               <div class="panel-body">
                  <div id="montarInputServico"></div>
                  <input type="hidden" id="countValidaInputServico" name="countValidaInputServico">
               </div>
            </div>

            <!-- campos hidden -->
            <input type="hidden" class="form-control" id="processo" name="processo">
            <input type="hidden" class="form-control" id="estado" name="estado">
            <input type="hidden" class="form-control" id="existeProdutoNovo" name="existeProdutoNovo">
            <input type="hidden" class="form-control" id="existeGerente" name="existeGerente">
            <input type="hidden" class="form-control" id="isGerente" name="isGerente" value="false">
            <input type="hidden" class="form-control" id="matriculaUsuario" name="matriculaUsuario">
            <input type="hidden" class="form-control" id="responsavelAtendimento" name="responsavelAtendimento">
           
         </form>
      </div>
   </div>
   <script type="text/javascript" src="scriptApp.js"></script>
   <script type="text/javascript" src="scriptCotacao.js"></script>

   <script type="text/javascript" src="modalAdicionarProduto.js"></script>
   <script type="text/javascript" src="modalBuscarProduto.js"></script>
   <script type="text/javascript" src="visualizarProdutos.js"></script>
   <script type="text/javascript" src="visualizarProdutosNovos.js"></script>
   <script type="text/javascript" src="scriptOrcamentoEmbaixador.js"></script>
   <script type="text/javascript" src="scriptGerenteResponsavel.js"></script>
   <script type="text/javascript" src="splash.js"></script>
   <script type="text/javascript">
    $(document).ready(function() {

    $("#justificativa").bind('paste', function(e) {
    e.preventDefault();
        });   
    });

    var today = new Date();
    today.setDate(today.getDate() + 15); //Voalá
    today = today.toISOString().split('T')[0];
                
    document.getElementsByName("prazoEntrega")[0].setAttribute('min', today);
    $("#prazoEntrega").keyup(function () {
                $("#prazoEntrega").val("");
            });

                        

            $.each($("[data-date]"), function (i, o) {
                var id = $(o).attr("id");
                FLUIGC.calendar("#" + id);
            });

            $(document).ready(function () {
                $.each($("[data-date]"), function (i, o) {
                    var id = $(o).attr("id");
                    if ($("#" + id).attr("readonly")) {
                        $("#" + id).data('DateTimePicker').disable();
                    }
                });
            });




    </script>
</body>

</html>