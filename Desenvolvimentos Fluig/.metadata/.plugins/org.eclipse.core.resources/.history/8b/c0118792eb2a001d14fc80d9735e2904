function beforeTaskSave(colleagueId,nextSequenceId,userList){

var state = getValue("WKNumState");
   var completTask = getValue("WKCompletTask");
   var rem = "manutencao";

log.info(">>>>> Envio de email customizado beforeTaskSave: state " + state);
log.info(">>>>> Envio de email customizado beforeTaskSave: completTask " + completTask);
   //if (completTask.equals("true")) {

       if (state == 4 || state == 0 ) {
    	   try{
    	       var empresa = fluigAPI.getSecurityService().getCurrentTenantId();
    	       var server = fluigAPI.getPageService().getServerURL();
    	       var usuario = hAPI.getCardValue("txt_nome_solic");
    	       var num_solic = getValue("WKNumProces");
    	       var template = "TPL_WF_FEEDBACK_PORTAL";    
    	       var remetente = "luis.rossi";
    	       var assunto  = "Obrigado pelo seu feedback!";

    	       var parametros = new java.util.HashMap();        
    	       parametros.put("SERVER_URL", server);
    	       parametros.put("NOME_SOLICITANTE", usuario);
    	       parametros.put("NUMERO_SOLIC", num_solic);
    	       parametros.put("subject", assunto);
    	       parametros.put("CODIGO_EMPRESA", empresa);

    	       var destinatarios = new java.util.ArrayList();
    	       destinatarios.add(hAPI.getCardValue("txt_email_solic"));	    

    	       notifier.notify(remetente, template, parametros, destinatarios, "text/html");
    	    } catch(e){
    	       log.error("Erro ao enviar email: " + e);
    	   }
       }
}